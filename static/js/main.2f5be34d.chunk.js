(this["webpackJsonpcanvas-app"]=this["webpackJsonpcanvas-app"]||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),s=n(10),c=n.n(s),a=(n(60),n(9)),o=(n(61),n(44)),u=n(2);var l=function(e,t){var n=t.expiryTimestamp,r=Object(o.useTimer)({expiryTimestamp:n,onExpire:function(){return console.warn("onExpire called")}}),s=r.seconds,c=r.minutes,a=r.hours,l=(r.days,r.isRunning,r.start,r.pause,r.resume,r.restart);return Object(i.useEffect)((function(){var t=3600*e.endTime.hours+60*e.endTime.minutes+e.endTime.seconds,n=new Date;n.setSeconds(n.getSeconds()+t),l(n)}),[e.endTime]),Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsxs)("div",{style:{fontSize:"500%"},children:[Object(u.jsx)("span",{children:a}),":",Object(u.jsx)("span",{children:c}),":",Object(u.jsx)("span",{children:s})]}),Object(u.jsx)("button",{className:"button",onClick:function(){var t=3600*e.endTime.hours+60*e.endTime.minutes+e.endTime.seconds,n=new Date;n.setSeconds(n.getSeconds()+t),l(n)},children:"\u5207\u66ff"})]})};var m=function(e){var t=Object(i.useState)(e.timeInfo.getStartTime().getHours()),n=Object(a.a)(t,2),r=n[0],s=n[1],c=Object(i.useState)(e.timeInfo.getStartTime().getMinutes()),o=Object(a.a)(c,2),l=o[0],m=o[1],j=Object(i.useState)(e.timeInfo.getEndTime().getHours()),f=Object(a.a)(j,2),d=f[0],b=f[1],h=Object(i.useState)(e.timeInfo.getEndTime().getMinutes()),g=Object(a.a)(h,2),v=g[0],O=g[1],x=Object(i.useState)(e.timeInfo.getNumPresenters()),p=Object(a.a)(x,2),T=p[0],k=p[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"\u8a2d\u5b9a\u9805\u76ee"}),Object(u.jsx)("p",{children:"\u958b\u59cb\u6642\u9593"}),Object(u.jsx)("input",{type:"time",name:"startTime",value:r+":"+l,onChange:function(t){var n=t.target.value.split(":").map(Number),i=Object(a.a)(n,2),r=i[0],c=i[1],o=new Date;o.setHours(r),o.setMinutes(c),e.timeInfo.setStartTime(o),s(r),m(c)}}),Object(u.jsx)("p",{children:"\u7d42\u4e86\u6642\u9593"}),Object(u.jsx)("input",{type:"time",name:"endTime",value:d+":"+v,onChange:function(t){var n=t.target.value.split(":").map(Number),i=Object(a.a)(n,2),r=i[0],s=i[1],c=new Date;c.setHours(r),c.setMinutes(s),e.timeInfo.setEndTime(c),b(r),O(s)}}),Object(u.jsxs)("p",{children:["\u767a\u8868\u4eba\u6570",T,"\u4eba"]}),Object(u.jsx)("input",{type:"number",name:"numPresenters",value:T,min:"1",onChange:function(t){var n=Number(t.target.value);e.timeInfo.setNumPresenters(n),k(n)}}),Object(u.jsx)("button",{onClick:function(){e.timeInfo.addNumPresenters(1),console.log(e.timeInfo.numPresenters),k(e.timeInfo.getNumPresenters())},children:"\u4eba\u6570+"}),Object(u.jsx)("input",{type:"text",className:"input",name:"presenter",onChange:function(e){e.target.value}}),Object(u.jsx)("button",{onClick:function(){console.log("CLONE");var e=document.getElementsByClassName("input")[0];null===e||void 0===e||e.after(e.cloneNode())},children:"CLONE"}),Object(u.jsx)("button",{onClick:function(){console.log("DELETE");var e=document.getElementsByClassName("input");e[e.length-1].remove()},children:"DELETE"}),Object(u.jsx)("p",{children:"\u5404\u767a\u8868\u6642\u9593"}),Object(u.jsx)("input",{type:"number"}),Object(u.jsx)("p",{children:"\u4f11\u61a9\u6642\u9593"}),Object(u.jsx)("input",{type:"number"})]})},j=n(37),f=n.n(j);f.a.setAppElement("#root");var d,b=function(e){var t=r.a.useState(!1),n=Object(a.a)(t,2),i=n[0],s=n[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){s(!0)},children:"\u8a2d\u5b9a"}),Object(u.jsxs)(f.a,{isOpen:i,children:[Object(u.jsx)("button",{onClick:function(){s(!1)},children:"\u9589\u3058\u308b"}),Object(u.jsx)(m,{timeInfo:e.timeInfo})]})]})},h=40,g=920,v=70,O=["red","blue","black","green","orange"],x=null,p=null,T=null,k=null;function y(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return(t<10?"0"+String(t):String(t))+":"+(n<10?"0"+String(n):String(n))}function S(e){var t=e.split(":");return 3600*Number(t[0])+60*Number(t[1])+Number(t[2])}function N(e,t,n,i,r,s){if(d=new Date,e){t.current&&e.clearRect(0,0,t.current.width,t.current.height);var c=function(e,t,n){for(var i,r=new Array(n.length-1),s=t-e,c=0;c<n.length-1;c++){i=0;for(var a=0;a<=c;a++)i+=n[a];r[c]=h+i/s*880}return r}(n,i,s);e.globalAlpha=1,e.strokeStyle="black",e.textAlign="center",e.beginPath(),e.moveTo(h,30),e.lineTo(h,110),e.stroke(),e.font="25px serif",e.fillText(r[0],(h+c[0])/2,45),e.font="30px serif",e.fillText(y(n),h,140),e.beginPath(),e.moveTo(g,30),e.lineTo(g,110),e.stroke(),e.font="25px serif",e.fillText(r[r.length-1],(c[c.length-1]+g)/2,45),e.font="30px serif",e.fillText(y(i),g,140);for(var a=0;a<c.length+1;a++)if(e.strokeStyle="black",e.beginPath(),e.moveTo(c[a],30),e.lineTo(c[a],110),e.stroke(),e.strokeStyle=O[a],e.beginPath(),0==a?e.moveTo(h,v):e.moveTo(c[a-1],v),a<c.length-1?e.lineTo(c[a],v):e.lineTo(g,v),e.stroke(),a<c.length){for(var o=0,u=0;u<=a;u++)o+=s[u];a>0&&(e.font="25px serif",e.fillText(r[a],(c[a-1]+c[a])/2,45)),e.font="30px serif",e.fillText(y(n+o),c[a],140)}var l=d.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),m=function(e,t,n){var i=n-t,r=S(e);return h+(r-t)/i*880}(l,n,i);e.strokeStyle="black",e.beginPath(),e.moveTo(m-20,50),e.lineTo(m,v),e.stroke(),e.beginPath(),e.moveTo(m-20,90),e.lineTo(m,v),e.stroke(),e.font="20px serif",e.fillText(l,m,110)}}var C=function(e){var t,n,r=i.useRef(null),s=i.useState(null),c=Object(a.a)(s,2),o=c[0],l=c[1],m=i.useState(e.timeInfo.getStartTime()),j=Object(a.a)(m,2),f=j[0],d=j[1],b=i.useState(e.timeInfo.getEndTime()),h=Object(a.a)(b,2),g=h[0],v=h[1],O=i.useState(e.timeInfo.getPresenters()),y=Object(a.a)(O,2),C=y[0],I=y[1],w=[],P=[];x&&clearInterval(x),x=setInterval((function(){d(e.timeInfo.getStartTime())}),100),t=S(f.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})),p&&clearInterval(p),p=setInterval((function(){v(e.timeInfo.getEndTime())}),100),n=S(g.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})),T&&clearInterval(T),T=setInterval((function(){I(e.timeInfo.getPresenters())}),100);for(var E=0;E<C.length;E++)w.push(C[E].name),P.push(C[E].time);return i.useEffect((function(){if(r.current){r.current.style.position="absolute",r.current.style.left="280px",r.current.style.top="10px",k&&clearInterval(k),k=setInterval((function(){N(o,r,t,n,w,P)}),10);var e=r.current.getContext("2d");e&&l(e)}N(o,r,t,n,w,P)}),[o,f,g,C]),Object(u.jsx)("div",{style:{textAlign:"center"},children:Object(u.jsx)("canvas",{id:"canvas",ref:r,width:960,height:150,style:{border:"2px solid #000",marginTop:10}})})};var I=function(e){var t=i.useRef(null),n=i.useState(null),r=Object(a.a)(n,2),s=r[0],c=r[1];return i.useEffect((function(){if(t.current){var e=t.current.getContext("2d");e&&c(e)}}),[s]),Object(u.jsxs)("div",{style:{textAlign:"center"},children:[Object(u.jsx)("canvas",{id:"canvas",ref:t,width:1e3,height:300,style:{border:"2px solid #000",marginTop:10}}),Object(u.jsx)(C,{timeInfo:e.timeInfo}),Object(u.jsx)(l,{endTime:{seconds:0,minutes:10,hours:0}}),Object(u.jsx)(b,{timeInfo:e.timeInfo})]})},w=n(38),P=(n(74),function(e){var t=e.title,n=e.setSelectedTab,r=e.index,s=Object(i.useCallback)((function(){n(r)}),[n,r]);return Object(u.jsx)("li",{children:Object(u.jsx)("button",{onClick:s,children:t})})}),E=(n(75),function(e){var t=e.children,n=Object(i.useState)(0),r=Object(a.a)(n,2),s=r[0],c=r[1];return Object(u.jsxs)("div",{className:"tabs",children:[Object(u.jsx)("ul",{className:"nav",children:t.map((function(e,t){return Object(u.jsx)(P,{title:e.props.presenter.name,index:t,setSelectedTab:c},t)}))}),t[s]]})}),D=(n(76),function(e){var t=e.children;return Object(u.jsx)("div",{className:"box",children:Object(u.jsx)("div",{className:"Memo",children:t})})}),A=(n(77),n(115)),B=n(118),L=n(120),M=n(124),H=(n(78),Object(A.a)((function(e){return{root:{backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}))),R=function(e){var t=Object(i.useState)(e.chats),n=Object(a.a)(t,2),r=n[0],s=(n[1],H());return Object(u.jsx)("div",{style:{maxHeight:200,overflow:"auto"},children:r.map((function(e,t){return Object(u.jsx)(B.a,{className:s.root,children:Object(u.jsx)(L.a,{alignItems:"flex-start",children:Object(u.jsx)(M.a,{primary:e})})},t)}))})},F=n(123),J=(n(81),n(121)),z=n(122),V=Object(A.a)((function(e){return{button:{margin:e.spacing(1)},leftIcon:{marginRight:e.spacing(1)},iconSmall:{fontSize:14}}})),W=function(e){var t=V();return Object(u.jsx)(J.a,{variant:"contained",color:"primary",className:t.button,onClick:function(t){e.onSendButtonClick(t)},children:Object(u.jsx)(z.a,{children:"send"})})},q=function(e){return Object(u.jsx)(r.a.Fragment,{children:Object(u.jsxs)("form",{className:"wrap",noValidate:!0,autoComplete:"off",children:[Object(u.jsx)(F.a,{id:"standard-text",label:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b",className:"text",margin:"normal",onChange:function(t){e.onChatChange(t.target.value)}}),Object(u.jsx)(W,{onSendButtonClick:function(t){return function(t){e.onButtonClick(t)}(t)}})]})})},G=function(e){var t,n=Object(i.useState)(e.chats),s=Object(a.a)(n,2),c=s[0],o=s[1],l=Object(i.useState)(!1),m=Object(a.a)(l,2),j=m[0],f=m[1];return Object(u.jsx)(r.a.Fragment,{children:Object(u.jsxs)("div",{className:"Chat",children:[Object(u.jsx)(R,{chats:c}),Object(u.jsx)(q,{onChatChange:function(e){t=e},onButtonClick:function(){var n=c;n.push(t),o(n),f(!j),console.log(e.chats)}})]})})},K=function(e){var t=e.presenter,n=(t.name,t.memo),i=t.chats;return Object(u.jsx)("div",{className:"presenter-tab",children:Object(u.jsx)(D,{title:"a",children:Object(u.jsxs)("div",{className:"box",children:[Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("textarea",{className:"memo",value:n,onChange:function(t){e.onMemoChange(e.presenter.id,t.target.value)}})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)(G,{chats:i})})]})})})},Q=function(e){for(var t=new Array(e.presenterNum),n=0;n<e.presenterNum;n++)t[n]={id:n,name:e.presenters[n],memo:"",chats:[""]};var r=Object(i.useState)(t),s=Object(a.a)(r,2),c=s[0],o=s[1],l=c.map((function(e){return Object(u.jsx)(K,{presenter:e,onMemoChange:function(e,t){return function(e,t){var n=c.map((function(n){return n.id===e?Object(w.a)(Object(w.a)({},n),{},{memo:t}):n}));o(n)}(e,t)}},e.id)}));return Object(u.jsx)("div",{children:Object(u.jsx)(E,{children:l})})};var U=function(e){for(var t=i.useRef(null),n=i.useState(null),r=Object(a.a)(n,2),s=r[0],c=r[1],o=e.timeInfo.getPresenters(),l=e.timeInfo.getNumPresenters(),m=new Array(l),j=0;j<l;j++)m[j]=o[j].name;return i.useEffect((function(){if(t.current){var e=t.current.getContext("2d");e&&c(e)}}),[s]),Object(u.jsx)("div",{style:{textAlign:"center"},children:Object(u.jsx)("div",{className:"content",children:Object(u.jsx)(Q,{presenters:m,presenterNum:l})})})},X=n(32),Y=n(33),Z=function(){function e(){Object(X.a)(this,e),this.startTime=new Date,this.endTime=new Date,this.numPresenters=1,this.presenters=new Array(this.numPresenters),this.breakTime={interbal:1,time:0},this.startTime.setHours(14),this.endTime.setHours(16),this.numPresenters=5,this.presenters=[{name:"abc",time:1500},{name:"def",time:1500},{name:"break",time:600},{name:"ghi",time:1500},{name:"jkl",time:1500}]}return Object(Y.a)(e,[{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setStartTime",value:function(e){this.startTime=e}},{key:"setEndTime",value:function(e){this.endTime=e}},{key:"getNumPresenters",value:function(){return this.numPresenters}},{key:"setNumPresenters",value:function(e){this.numPresenters=e}},{key:"addNumPresenters",value:function(e){this.numPresenters=this.numPresenters+e,this.endTime.setSeconds(this.endTime.getSeconds()+60),this.endTime=new Date(this.endTime)}},{key:"getPresenters",value:function(){return this.presenters}},{key:"setPresenters",value:function(){}},{key:"getBreakTime",value:function(){return this.breakTime}},{key:"setBreakTime",value:function(){}}]),e}(),$=n(46),_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $.EventEmitter;Object(X.a)(this,e),this.ws=void 0,this.ee=void 0,this.ws=t,this.ee=n,t.onmessage=this.message.bind(this),t.onopen=this.open.bind(this),t.onclose=this.close.bind(this),t.onerror=this.error.bind(this)}return Object(Y.a)(e,[{key:"on",value:function(e,t){this.ee.on(e,t)}},{key:"off",value:function(e,t){this.ee.removeListener(e,t)}},{key:"open",value:function(){this.ee.emit("connect")}},{key:"close",value:function(){this.ee.emit("disconnect")}},{key:"error",value:function(e){console.log("websocket error: ",e)}},{key:"emit",value:function(e){this.ws.send(e)}},{key:"message",value:function(e){try{this.ee.emit("message",e)}catch(t){this.ee.emit("error",t),console.log(Date().toString()+": ",t)}}}]),e}(),ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),s(e),c(e)}))},te=new Z,ne=new _(new WebSocket("ws://localhost:1323/ws"));ne.on("message",(function(e){var t=JSON.parse(e.data);console.log(t)})),c.a.render(Object(u.jsxs)(r.a.StrictMode,{children:[Object(u.jsx)(I,{timeInfo:te}),Object(u.jsx)(U,{timeInfo:te}),Object(u.jsx)("button",{onClick:function(){var e=JSON.stringify({messagetype:"memo",message:"React!"});console.log(e),ne.emit(e)},children:"\u9001\u4fe1"})]}),document.getElementById("root")),ee()}},[[83,1,2]]]);
//# sourceMappingURL=main.2f5be34d.chunk.js.map